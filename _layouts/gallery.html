---
layout: default
---
<article class="gallery">
  <header class="gallery-header">
    <h1 class="gallery-title">{{ page.title | escape }}</h1>
    {% if page.description %}
    <p class="gallery-description">{{ page.description }}</p>
    {% endif %}
  </header>

  <div class="gallery-content">
    {{ content }}

    {% if page.gallery_path %}
    <div class="photo-grid" aria-live="polite">
      {% assign image_files = site.static_files | where_exp: "file", "file.path contains page.gallery_path" %}
      {% for image in image_files %}
      <figure class="photo-item">
        <!--
              NOTE: This version prioritizes speed and zero layout jank.
              Images render at their natural aspect ratio; no JS layout work.
              If you later generate responsive variants, you can wrap the <img>
              with a <picture> (see comment near the end).
            -->
        <img src="{{ image.path | relative_url }}" alt="{{ image.name | escape }}" loading="lazy" decoding="async"
          fetchpriority="{% if forloop.index == 1 %}high{% else %}low{% endif %}">
      </figure>
      {% else %}
      <p>No images found in the specified gallery path.</p>
      {% endfor %}
    </div>
    {% else %}
    <p>No gallery path specified.</p>
    {% endif %}
  </div>
</article>

<style>
  /* Let the gallery expand and center on large screens */
  .gallery-content {
    max-width: 1600px;
    margin: 0 auto;
  }

  /* Masonry-like layout using explicit column counts */
  .photo-grid {
    padding: 8px;
    column-gap: 16px;
    -webkit-column-gap: 16px;
    /* Safari */
    column-fill: balance;
    -webkit-column-fill: balance;
    /* Safari */
    /* default: 1 column on tiny screens */
    column-count: 1;
    -webkit-column-count: 1;
  }

  /* Grow columns as viewport widens */
  @media (min-width: 640px) {
    .photo-grid {
      column-count: 2;
      -webkit-column-count: 2;
    }
  }

  @media (min-width: 900px) {
    .photo-grid {
      column-count: 3;
      -webkit-column-count: 3;
    }
  }

  @media (min-width: 1200px) {
    .photo-grid {
      column-count: 4;
      -webkit-column-count: 4;
    }
  }

  @media (min-width: 1600px) {
    .photo-grid {
      column-count: 5;
      -webkit-column-count: 5;
    }
  }

  .photo-item {
    break-inside: avoid;
    -webkit-column-break-inside: avoid;
    /* Safari */
    margin: 0 0 16px;
  }

  .photo-item img {
    display: block;
    width: 100%;
    height: auto;
    /* preserve natural aspect ratios */
    border-radius: 8px;
    /* optional fade-in */
    opacity: 0;
    transition: opacity .25s ease;
  }

  .photo-item img:is(:not([loading]), [loading="lazy"]:not(:placeholder-shown)) {
    opacity: 1;
  }
</style>